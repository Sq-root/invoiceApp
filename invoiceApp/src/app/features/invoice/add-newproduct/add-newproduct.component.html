<section class="invoice-product-section">
  <app-header></app-header>
  <div class="row product-container gap-4">
    <div class="col-7">
      <div class=" new-product-container card">
        <form [formGroup]="productForm">
          <div class="card-body">
            <h5 class="card-title">Product Information</h5>
            <div class="mt-3 mb-3">
              <label for="productName" class="form-label">Item Name <span class="text-red">*</span> </label>
              <input type="text" class="form-control" id="productName" name="productName" formControlName="productName"
                placeholder="Enter Item Name">
              <span
                *ngIf="productForm.get('productName').touched && productForm.get('productName').hasError('required')"
                class="validation">Item Name is required</span>
            </div>
            <div class="mb-3">

              <div class="product-unit-container">
                <div class="unit-title d-flex justify-content-between align-items-center">
                  <p>Price/Unit</p>
                  <!-- <label for="productName" class="form-label">Price/Unit</label> -->
                  <!-- <i class="pi pi-plus" style="font-size: 1rem"></i> -->
                  <p-button icon="pi pi-plus" class="unitbtn" severity="info" (click)="addProductRateUnit()"></p-button>
                </div>
                <ul class="list-group mt-2">
                  <li class="list-group-item" formArrayName="productRateUnit"
                    *ngFor="let product of productForm.get('productRateUnit')['controls']; let i = index;">
                    <div [formGroupName]="i" class="row">
                      <div class="col-4">
                        <p-dropdown [options]="unitList" class="unitDropdown" [showClear]="true"
                          placeholder="Select Unit" formControlName="unit">
                          <ng-template pTemplate="selectedItem" let-selectedOption>
                            <div class="flex align-items-center gap-2">
                              <div>{{ selectedOption }}</div>
                            </div>
                          </ng-template>
                          <ng-template let-unit pTemplate="item">
                            <div class="flex align-items-center gap-2">
                              <div>{{ unit }}</div>
                            </div>
                          </ng-template>
                        </p-dropdown>
                      </div>
                      <div class="col-6">
                        <p-inputNumber class="form-filed" inputId="minmaxfraction" mode="decimal"
                          [minFractionDigits]="2" placeholder="0.00" [maxFractionDigits]="3"
                          formControlName="rate"></p-inputNumber>
                      </div>
                      <div class="col-2">
                        <button pButton pRipple icon="pi pi-trash" class="p-button-rounded p-button-danger"
                          (click)="removeProductRateUnit(i)"
                          [disabled]="!(productForm.get('productRateUnit')['controls'].length > 1)"></button>
                      </div>
                    </div>
                  </li>
                </ul>
              </div>
            </div>

            <button class="btn btn-primary savebtn float-end" (click)="saveProductDetails()">Save</button>
          </div>
        </form>
      </div>
    </div>
    <div class="col-4">
      <!-- <div class="product-summary border-1">
        <div class="card">
          <div class="card-header">
            Featured
          </div>
          <div class="card-body">
            <h5 class="card-title">Special title treatment</h5>
            <p class="card-text">With supporting text below as a natural lead-in to additional content.</p>
            <a href="#" class="btn btn-primary">Go somewhere</a>
          </div>
        </div>
      </div> -->
    </div>
  </div>

</section>
